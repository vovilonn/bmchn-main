"use strict";

jQuery(function ($) {
  $(document).ready(function () {
    $("video[autoplay]").each(function () {
      this.play();
    });
    if (innerWidth > 1024) {
      var mainSlider = new Swiper('.main-slider .swiper-container', {
        direction: 'vertical',
        effect: 'fade',
        mousewheel: true,
        slidesPerView: 1,
        pagination: {
          el: '.swiper-pagination',
          clickable: true
        },
        on: {
          slideChange: function slideChange() {
            var index_currentSlide = this.realIndex;
            $('.js-main-slider-tabs li button').removeClass('active');
            $('.js-main-slider-tabs li button[data-slide-index=' + (index_currentSlide + 1) + ']').addClass('active');
          }
        }
      });
      $('.js-main-slider-tabs li button').click(function () {
        var index = $(this).attr('data-slide-index');
        $('.js-main-slider-tabs li button').removeClass('active');
        $(this).addClass('active');
        $('.main-slider .swiper-pagination-bullet:nth-child(' + index + ')').click();
      });
    }
    $('.js-nav-open').click(function () {
      $(this).toggleClass('active');
      $('.js-header-nav').toggleClass('active');
    });
    $('.js-services-popup-opener').click(function () {
      var index = $(this).attr('data-tab-index');
      $('.js-services-popup').addClass('active');
      $('.js-services-popup-nav button, .js-services-popup-container').removeClass('active');
      $('.js-services-popup-nav button[data-tab-index="' + index + '"]').addClass('active');
      $('.js-services-popup-container[data-tab-index="' + index + '"]').addClass('active');
    });
    $('.js-services-popup-nav button').click(function () {
      var index = $(this).attr('data-tab-index');
      $('.js-services-popup-nav button, .js-services-popup-container').removeClass('active');
      $('.js-services-popup-nav button[data-tab-index="' + index + '"]').addClass('active');
      $('.js-services-popup-container[data-tab-index="' + index + '"]').addClass('active');
    });
    $('.js-services-popup-close').click(function () {
      $('.js-services-popup').removeClass('active');
    });
    $('.js-store-tabs button').click(function () {
      var index = $(this).attr('data-store-slider-index');
      $('.js-store-tabs button, .js-store-slider').removeClass('active');
      $('.js-store-slider[data-store-slider-index="' + index + '"]').addClass('active');
      $('.js-store-tabs button[data-store-slider-index="' + index + '"]').addClass('active');
    });
    var storeSliders = $('.js-store-slider');
    if (storeSliders.length) {
      storeSliders.each(function () {
        var index = $(this).attr('data-store-slider-index');
        var storeSlider = new Swiper('.js-store-slider[data-store-slider-index="' + index + '"] .swiper-container', {
          direction: 'horizontal',
          mousewheel: false,
          slidesPerView: 1.8,
          spaceBetween: 12,
          pagination: false,
          navigation: {
            nextEl: '.js-store-slider[data-store-slider-index="' + index + '"] .js-store-slider-next',
            prevEl: '.js-store-slider[data-store-slider-index="' + index + '"] .js-store-slider-prev'
          },
          breakpoints: {
            768: {
              slidesPerView: 4
            }
          }
        });
      });
    }
    var teamSlider = new Swiper('.js-team-slider .swiper-container', {
      direction: 'horizontal',
      mousewheel: false,
      slidesPerView: 1.1,
      spaceBetween: 12,
      pagination: false,
      navigation: {
        nextEl: '.js-team-slider-next',
        prevEl: '.js-team-slider-prev'
      },
      breakpoints: {
        768: {
          slidesPerView: 3
        }
      }
    });
    $(window).on('scroll', function () {
      var st = $(window).scrollTop();
      var section = $('.biomachine-future');
      var sectionST = section.offset().top;
      var sectionHeight = section.height();
      var windowHeight = $(window).height();
      var point = sectionST + sectionHeight - windowHeight;
      if (st >= point) {
        $('.footer').addClass('--visible');
        $('.biomachine-string__bg').addClass('--visible');
        $('.js-page-nav').addClass('--hidden');
      } else {
        $('.biomachine-string__bg').removeClass('--visible');
        $('.footer').removeClass('--visible');
        $('.js-page-nav').removeClass('--hidden');
      }
    });
    $(window).on('scroll', function () {
      var st = $(window).scrollTop();
      var section = $('.js-store-section');
      var sectionST = section.offset().top;
      var point = sectionST - 400;
      if (st >= point) {
        section.removeClass('--inverted');
        $('.biomachine-promo.--last').addClass('--inverted');
      } else {
        section.addClass('--inverted');
        $('.biomachine-promo.--last').removeClass('--inverted');
      }
    });
    $('.biomachine-string__item').each(function () {
      var item = this;
      $(window).on('scroll', function () {
        var height = $(window).height();
        height = height - 150;
        var viewportOffset = item.getBoundingClientRect();
        var top = viewportOffset.top - height;
        if (top + 150 <= 0 && top + 150 >= -Math.abs(height / 2)) {
          var percent = top * 100 / height;
          percent = +Math.abs(percent);
          percent = Math.round(percent);
          var value = 0;
          value = percent * 2;
          $(item).css('opacity', value / 100);
          if (percent >= 40) {
            $(item).removeClass('--opacity');
          }
        }
        if (top + 150 <= -Math.abs(height / 2) && top + 150 >= -Math.abs(height)) {
          var _percent = top * 100 / height;
          _percent = +Math.abs(_percent);
          _percent = Math.round(_percent);
          var _value = 0;
          if (_percent >= 50 && _percent < 55) {
            _value = 0.9;
          } else if (_percent >= 55 && _percent < 60) {
            _value = 0.8;
          } else if (_percent >= 60 && _percent < 65) {
            _value = 0.7;
          } else if (_percent >= 65 && _percent < 70) {
            _value = 0.6;
          } else if (_percent >= 70 && _percent < 75) {
            _value = 0.5;
          } else if (_percent >= 75 && _percent < 80) {
            _value = 0.4;
          } else if (_percent >= 80 && _percent < 85) {
            _value = 0.3;
          } else if (_percent >= 85 && _percent < 90) {
            _value = 0.2;
          } else if (_percent >= 90 && _percent < 95) {
            _value = 0.1;
          } else if (_percent >= 90 && _percent < 100) {
            _value = 0;
          }
          if ($(item).hasClass('--last')) {
            $('.biomachine-string__bg').css('opacity', _value);
          }
          $(item).css('opacity', _value);
        }
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdlbmVyYWwuanMiXSwibmFtZXMiOlsialF1ZXJ5IiwiJCIsImRvY3VtZW50IiwicmVhZHkiLCJlYWNoIiwicGxheSIsImlubmVyV2lkdGgiLCJtYWluU2xpZGVyIiwiU3dpcGVyIiwiZGlyZWN0aW9uIiwiZWZmZWN0IiwibW91c2V3aGVlbCIsInNsaWRlc1BlclZpZXciLCJwYWdpbmF0aW9uIiwiZWwiLCJjbGlja2FibGUiLCJvbiIsInNsaWRlQ2hhbmdlIiwiaW5kZXhfY3VycmVudFNsaWRlIiwicmVhbEluZGV4IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImNsaWNrIiwiaW5kZXgiLCJhdHRyIiwidG9nZ2xlQ2xhc3MiLCJzdG9yZVNsaWRlcnMiLCJsZW5ndGgiLCJzdG9yZVNsaWRlciIsInNwYWNlQmV0d2VlbiIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJicmVha3BvaW50cyIsInRlYW1TbGlkZXIiLCJ3aW5kb3ciLCJzdCIsInNjcm9sbFRvcCIsInNlY3Rpb24iLCJzZWN0aW9uU1QiLCJvZmZzZXQiLCJ0b3AiLCJzZWN0aW9uSGVpZ2h0IiwiaGVpZ2h0Iiwid2luZG93SGVpZ2h0IiwicG9pbnQiLCJpdGVtIiwidmlld3BvcnRPZmZzZXQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJNYXRoIiwiYWJzIiwicGVyY2VudCIsInJvdW5kIiwidmFsdWUiLCJjc3MiLCJoYXNDbGFzcyJdLCJtYXBwaW5ncyI6Ijs7QUFBQUEsTUFBTSxDQUFDLFVBQVVDLENBQUMsRUFBRTtFQUNoQkEsQ0FBQyxDQUFDQyxRQUFRLENBQUMsQ0FBQ0MsS0FBSyxDQUFDLFlBQVk7SUFFMUJGLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDRyxJQUFJLENBQUMsWUFBVTtNQUFFLElBQUksQ0FBQ0MsSUFBSSxDQUFDLENBQUM7SUFBRSxDQUFDLENBQUM7SUFFckQsSUFBSUMsVUFBVSxHQUFHLElBQUksRUFBRTtNQUNuQixJQUFJQyxVQUFVLEdBQUcsSUFBSUMs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QUFDLEVBQUU7VUFDMUUsSUFBSVEsUUFBTyxHQUFJVixHQUFHLEdBQUcsR0FBRyxHQUFJRSxNQUFNO1VBQ2xDUSxRQUFPLEdBQUcsQ0FBQ0YsSUFBSSxDQUFDQyxHQUFHLENBQUNDLFFBQU8sQ0FBQztVQUM1QkEsUUFBTyxHQUFHRixJQUFJLENBQUNHLEtBQUssQ0FBQ0QsUUFBTyxDQUFDO1VBQzdCLElBQUlFLE1BQUssR0FBRyxDQUFDO1VBRWIsSUFBSUYsUUFBTyxJQUFJLEVBQUUsSUFBSUEsUUFBTyxHQUFHLEVBQUUsRUFBRTtZQUMvQkUsTUFBSyxHQUFHLEdBQUc7VUFDZixDQUFDLE1BQU0sSUFBSUYsUUFBTyxJQUFJLEVBQUUsSUFBSUEsUUFBTyxHQUFHLEVBQUUsRUFBRTtZQUN0Q0UsTUFBSyxHQUFHLEdBQUc7VUFDZixDQUFDLE1BQU0sSUFBSUYsUUFBTyxJQUFJLEVBQUUsSUFBSUEsUUFBTyxHQUFHLEVBQUUsRUFBRTtZQUN0Q0UsTUFBSyxHQUFHLEdBQUc7VUFDZixDQUFDLE1BQU0sSUFBSUYsUUFBTyxJQUFJLEVBQUUsSUFBSUEsUUFBTyxHQUFHLEVBQUUsRUFBRTtZQUN0Q0UsTUFBSyxHQUFHLEdBQUc7VUFDZixDQUFDLE1BQU0sSUFBSUYsUUFBTyxJQUFJLEVBQUUsSUFBSUEsUUFBTyxHQUFHLEVBQUUsRUFBRTtZQUN0Q0UsTUFBSyxHQUFHLEdBQUc7VUFDZixDQUFDLE1BQU0sSUFBSUYsUUFBTyxJQUFJLEVBQUUsSUFBSUEsUUFBTyxHQUFHLEVBQUUsRUFBRTtZQUN0Q0UsTUFBSyxHQUFHLEdBQUc7VUFDZixDQUFDLE1BQU0sSUFBSUYsUUFBTyxJQUFJLEVBQUUsSUFBSUEsUUFBTyxHQUFHLEVBQUUsRUFBRTtZQUN0Q0UsTUFBSyxHQUFHLEdBQUc7VUFDZixDQUFDLE1BQU0sSUFBSUYsUUFBTyxJQUFJLEVBQUUsSUFBSUEsUUFBTyxHQUFHLEVBQUUsRUFBRTtZQUN0Q0UsTUFBSyxHQUFHLEdBQUc7VUFDZixDQUFDLE1BQU0sSUFBSUYsUUFBTyxJQUFJLEVBQUUsSUFBSUEsUUFBTyxHQUFHLEVBQUUsRUFBRTtZQUN0Q0UsTUFBSyxHQUFHLEdBQUc7VUFDZixDQUFDLE1BQU0sSUFBSUYsUUFBTyxJQUFJLEVBQUUsSUFBSUEsUUFBTyxHQUFHLEdBQUcsRUFBRTtZQUN2Q0UsTUFBSyxHQUFHLENBQUM7VUFDYjtVQUVBLElBQUlwRCxDQUFDLENBQUM2QyxJQUFJLENBQUMsQ0FBQ1MsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQzVCdEQsQ0FBQyxDQUFDLHdCQUF3QixDQUFDLENBQUNxRCxHQUFHLENBQUMsU0FBUyxFQUFFRCxNQUFLLENBQUM7VUFDckQ7VUFFQXBELENBQUMsQ0FBQzZDLElBQUksQ0FBQyxDQUFDUSxHQUFHLENBQUMsU0FBUyxFQUFFRCxNQUFLLENBQUM7UUFDakM7TUFDSixDQUFDLENBQUM7SUFDTixDQUFDLENBQUM7RUFFTixDQUFDLENBQUM7QUFDTixDQUFDLENBQUMiLCJmaWxlIjoiYnVpbGQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsialF1ZXJ5KGZ1bmN0aW9uICgkKSB7XG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICQoXCJ2aWRlb1thdXRvcGxheV1cIikuZWFjaChmdW5jdGlvbigpeyB0aGlzLnBsYXkoKTsgfSk7XG5cbiAgICAgICAgaWYgKGlubmVyV2lkdGggPiAxMDI0KSB7XG4gICAgICAgICAgICBsZXQgbWFpblNsaWRlciA9IG5ldyBTd2lwZXIoJy5tYWluLXNsaWRlciAuc3dpcGVyLWNvbnRhaW5lcicsIHtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXG4gICAgICAgICAgICAgICAgZWZmZWN0OiAnZmFkZScsXG4gICAgICAgICAgICAgICAgbW91c2V3aGVlbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICBjbGlja2FibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlQ2hhbmdlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleF9jdXJyZW50U2xpZGUgPSB0aGlzLnJlYWxJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5qcy1tYWluLXNsaWRlci10YWJzIGxpIGJ1dHRvbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5qcy1tYWluLXNsaWRlci10YWJzIGxpIGJ1dHRvbltkYXRhLXNsaWRlLWluZGV4PScgKyAoaW5kZXhfY3VycmVudFNsaWRlICsgMSkgKyAnXScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQoJy5qcy1tYWluLXNsaWRlci10YWJzIGxpIGJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAkKHRoaXMpLmF0dHIoJ2RhdGEtc2xpZGUtaW5kZXgnKTtcbiAgICAgICAgICAgICAgICAkKCcuanMtbWFpbi1zbGlkZXItdGFicyBsaSBidXR0b24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJCgnLm1haW4tc2xpZGVyIC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXQ6bnRoLWNoaWxkKCcgKyBpbmRleCArICcpJykuY2xpY2soKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgJCgnLmpzLW5hdi1vcGVuJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcuanMtaGVhZGVyLW5hdicpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLmpzLXNlcnZpY2VzLXBvcHVwLW9wZW5lcicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxldCBpbmRleCA9ICQodGhpcykuYXR0cignZGF0YS10YWItaW5kZXgnKTtcbiAgICAgICAgICAgICQoJy5qcy1zZXJ2aWNlcy1wb3B1cCcpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICQoJy5qcy1zZXJ2aWNlcy1wb3B1cC1uYXYgYnV0dG9uLCAuanMtc2VydmljZXMtcG9wdXAtY29udGFpbmVyJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCgnLmpzLXNlcnZpY2VzLXBvcHVwLW5hdiBidXR0b25bZGF0YS10YWItaW5kZXg9XCInICsgaW5kZXggKyAnXCJdJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCgnLmpzLXNlcnZpY2VzLXBvcHVwLWNvbnRhaW5lcltkYXRhLXRhYi1pbmRleD1cIicgKyBpbmRleCArICdcIl0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJy5qcy1zZXJ2aWNlcy1wb3B1cC1uYXYgYnV0dG9uJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gJCh0aGlzKS5hdHRyKCdkYXRhLXRhYi1pbmRleCcpO1xuICAgICAgICAgICAgJCgnLmpzLXNlcnZpY2VzLXBvcHVwLW5hdiBidXR0b24sIC5qcy1zZXJ2aWNlcy1wb3B1cC1jb250YWluZXInKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcuanMtc2VydmljZXMtcG9wdXAtbmF2IGJ1dHRvbltkYXRhLXRhYi1pbmRleD1cIicgKyBpbmRleCArICdcIl0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcuanMtc2VydmljZXMtcG9wdXAtY29udGFpbmVyW2RhdGEtdGFiLWluZGV4PVwiJyArIGluZGV4ICsgJ1wiXScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLmpzLXNlcnZpY2VzLXBvcHVwLWNsb3NlJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnLmpzLXNlcnZpY2VzLXBvcHVwJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKCcuanMtc3RvcmUtdGFicyBidXR0b24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgaW5kZXggPSAkKHRoaXMpLmF0dHIoJ2RhdGEtc3RvcmUtc2xpZGVyLWluZGV4Jyk7XG4gICAgICAgICAgICAkKCcuanMtc3RvcmUtdGFicyBidXR0b24sIC5qcy1zdG9yZS1zbGlkZXInKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcuanMtc3RvcmUtc2xpZGVyW2RhdGEtc3RvcmUtc2xpZGVyLWluZGV4PVwiJyArIGluZGV4ICsgJ1wiXScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICQoJy5qcy1zdG9yZS10YWJzIGJ1dHRvbltkYXRhLXN0b3JlLXNsaWRlci1pbmRleD1cIicgKyBpbmRleCArICdcIl0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBzdG9yZVNsaWRlcnMgPSAkKCcuanMtc3RvcmUtc2xpZGVyJyk7XG5cbiAgICAgICAgaWYgKHN0b3JlU2xpZGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHN0b3JlU2xpZGVycy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAkKHRoaXMpLmF0dHIoJ2RhdGEtc3RvcmUtc2xpZGVyLWluZGV4Jyk7XG4gICAgICAgICAgICAgICAgbGV0IHN0b3JlU2xpZGVyID0gbmV3IFN3aXBlcignLmpzLXN0b3JlLXNsaWRlcltkYXRhLXN0b3JlLXNsaWRlci1pbmRleD1cIicgKyBpbmRleCArICdcIl0gLnN3aXBlci1jb250YWluZXInLCB7XG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxuICAgICAgICAgICAgICAgICAgICBtb3VzZXdoZWVsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMS44LFxuICAgICAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDEyLFxuICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEVsOiAnLmpzLXN0b3JlLXNsaWRlcltkYXRhLXN0b3JlLXNsaWRlci1pbmRleD1cIicgKyBpbmRleCArICdcIl0gLmpzLXN0b3JlLXNsaWRlci1uZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZFbDogJy5qcy1zdG9yZS1zbGlkZXJbZGF0YS1zdG9yZS1zbGlkZXItaW5kZXg9XCInICsgaW5kZXggKyAnXCJdIC5qcy1zdG9yZS1zbGlkZXItcHJldidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtwb2ludHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIDc2ODoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0ZWFtU2xpZGVyID0gbmV3IFN3aXBlcignLmpzLXRlYW0tc2xpZGVyIC5zd2lwZXItY29udGFpbmVyJywge1xuICAgICAgICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXG4gICAgICAgICAgICBtb3VzZXdoZWVsOiBmYWxzZSxcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDEuMSxcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMTIsXG4gICAgICAgICAgICBwYWdpbmF0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgICAgICBuZXh0RWw6ICcuanMtdGVhbS1zbGlkZXItbmV4dCcsXG4gICAgICAgICAgICAgICAgcHJldkVsOiAnLmpzLXRlYW0tc2xpZGVyLXByZXYnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYnJlYWtwb2ludHM6IHtcbiAgICAgICAgICAgICAgICA3Njg6IHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICAkKHdpbmRvdykub24oJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxldCBzdCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAgICAgICAgIGxldCBzZWN0aW9uID0gJCgnLmJpb21hY2hpbmUtZnV0dXJlJylcbiAgICAgICAgICAgIGxldCBzZWN0aW9uU1QgPSBzZWN0aW9uLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgIGxldCBzZWN0aW9uSGVpZ2h0ID0gc2VjdGlvbi5oZWlnaHQoKTtcbiAgICAgICAgICAgIGxldCB3aW5kb3dIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG4gICAgICAgICAgICBsZXQgcG9pbnQgPSAoc2VjdGlvblNUICsgc2VjdGlvbkhlaWdodCkgLSB3aW5kb3dIZWlnaHQ7XG5cbiAgICAgICAgICAgIGlmIChzdCA+PSBwb2ludCkge1xuICAgICAgICAgICAgICAgICQoJy5mb290ZXInKS5hZGRDbGFzcygnLS12aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgJCgnLmJpb21hY2hpbmUtc3RyaW5nX19iZycpLmFkZENsYXNzKCctLXZpc2libGUnKTtcbiAgICAgICAgICAgICAgICAkKCcuanMtcGFnZS1uYXYnKS5hZGRDbGFzcygnLS1oaWRkZW4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLmJpb21hY2hpbmUtc3RyaW5nX19iZycpLnJlbW92ZUNsYXNzKCctLXZpc2libGUnKTtcbiAgICAgICAgICAgICAgICAkKCcuZm9vdGVyJykucmVtb3ZlQ2xhc3MoJy0tdmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICQoJy5qcy1wYWdlLW5hdicpLnJlbW92ZUNsYXNzKCctLWhpZGRlbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkKHdpbmRvdykub24oJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxldCBzdCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAgICAgICAgIGxldCBzZWN0aW9uID0gJCgnLmpzLXN0b3JlLXNlY3Rpb24nKVxuICAgICAgICAgICAgbGV0IHNlY3Rpb25TVCA9IHNlY3Rpb24ub2Zmc2V0KCkudG9wO1xuICAgICAgICAgICAgbGV0IHBvaW50ID0gc2VjdGlvblNUIC0gNDAwO1xuXG4gICAgICAgICAgICBpZiAoc3QgPj0gcG9pbnQpIHtcbiAgICAgICAgICAgICAgICBzZWN0aW9uLnJlbW92ZUNsYXNzKCctLWludmVydGVkJyk7XG4gICAgICAgICAgICAgICAgJCgnLmJpb21hY2hpbmUtcHJvbW8uLS1sYXN0JykuYWRkQ2xhc3MoJy0taW52ZXJ0ZWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VjdGlvbi5hZGRDbGFzcygnLS1pbnZlcnRlZCcpO1xuICAgICAgICAgICAgICAgICQoJy5iaW9tYWNoaW5lLXByb21vLi0tbGFzdCcpLnJlbW92ZUNsYXNzKCctLWludmVydGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgJCgnLmJpb21hY2hpbmUtc3RyaW5nX19pdGVtJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgaXRlbSA9IHRoaXM7XG5cbiAgICAgICAgICAgICQod2luZG93KS5vbignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGxldCBoZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gaGVpZ2h0IC0gMTUwO1xuICAgICAgICAgICAgICAgIGxldCB2aWV3cG9ydE9mZnNldCA9IGl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgbGV0IHRvcCA9IHZpZXdwb3J0T2Zmc2V0LnRvcCAtIGhlaWdodDtcbiAgICAgICAgICAgICAgICBpZiAoKHRvcCArIDE1MCkgPD0gMCAmJiAodG9wICsgMTUwKSA+PSAtTWF0aC5hYnMoaGVpZ2h0IC8gMikpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBlcmNlbnQgPSAodG9wICogMTAwKSAvIGhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudCA9ICtNYXRoLmFicyhwZXJjZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudCA9IE1hdGgucm91bmQocGVyY2VudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwZXJjZW50ICogMjtcbiAgICAgICAgICAgICAgICAgICAgJChpdGVtKS5jc3MoJ29wYWNpdHknLCB2YWx1ZSAvIDEwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlcmNlbnQgPj0gNDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoaXRlbSkucmVtb3ZlQ2xhc3MoJy0tb3BhY2l0eScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCh0b3AgKyAxNTApIDw9IC1NYXRoLmFicyhoZWlnaHQgLyAyKSAmJiAodG9wICsgMTUwKSA+PSAtTWF0aC5hYnMoaGVpZ2h0KSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGVyY2VudCA9ICh0b3AgKiAxMDApIC8gaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBwZXJjZW50ID0gK01hdGguYWJzKHBlcmNlbnQpO1xuICAgICAgICAgICAgICAgICAgICBwZXJjZW50ID0gTWF0aC5yb3VuZChwZXJjZW50KTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gMDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocGVyY2VudCA+PSA1MCAmJiBwZXJjZW50IDwgNTUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gMC45O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBlcmNlbnQgPj0gNTUgJiYgcGVyY2VudCA8IDYwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IDAuODtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwZXJjZW50ID49IDYwICYmIHBlcmNlbnQgPCA2NSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAwLjc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGVyY2VudCA+PSA2NSAmJiBwZXJjZW50IDwgNzApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gMC42O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBlcmNlbnQgPj0gNzAgJiYgcGVyY2VudCA8IDc1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IDAuNTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwZXJjZW50ID49IDc1ICYmIHBlcmNlbnQgPCA4MCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAwLjQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGVyY2VudCA+PSA4MCAmJiBwZXJjZW50IDwgODUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gMC4zO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBlcmNlbnQgPj0gODUgJiYgcGVyY2VudCA8IDkwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IDAuMjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwZXJjZW50ID49IDkwICYmIHBlcmNlbnQgPCA5NSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAwLjE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGVyY2VudCA+PSA5MCAmJiBwZXJjZW50IDwgMTAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoJChpdGVtKS5oYXNDbGFzcygnLS1sYXN0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5iaW9tYWNoaW5lLXN0cmluZ19fYmcnKS5jc3MoJ29wYWNpdHknLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkKGl0ZW0pLmNzcygnb3BhY2l0eScsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcblxuICAgIH0pO1xufSk7Il19