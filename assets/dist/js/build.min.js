"use strict";

jQuery(function ($) {
  $(document).ready(function () {
    $('.js-page-nav li a').click(function (e) {
      e.preventDefault();
      var index = $(this).attr('data-page-nav-index');
      $('.js-page-nav-popup').addClass('--active');
      $('.js-page-nav-popup .js-page-nav-inner[data-page-nav-index="' + index + '"]').addClass('--active');
    });
    $('.js-page-nav-popup .js-close').click(function () {
      $('.js-page-nav-popup, .js-page-nav-inner').removeClass('--active');
    });
    $("video[autoplay]").each(function () {
      this.play();
    });
    if (innerWidth > 1024) {
      var mainSlider = new Swiper('.main-slider .swiper-container', {
        direction: 'vertical',
        mousewheel: true,
        slidesPerView: 1,
        pagination: {
          el: '.swiper-pagination',
          clickable: true
        },
        on: {
          slideChange: function slideChange() {
            var index_currentSlide = this.realIndex;
            $('.js-main-slider-tabs li button').removeClass('active');
            $('.js-main-slider-tabs li button[data-slide-index=' + (index_currentSlide + 1) + ']').addClass('active');
          }
        }
      });
      $('.js-main-slider-tabs li button').click(function () {
        var index = $(this).attr('data-slide-index');
        $('.js-main-slider-tabs li button').removeClass('active');
        $(this).addClass('active');
        $('.main-slider .swiper-pagination-bullet:nth-child(' + index + ')').click();
      });
    }
    $('.js-nav-open').click(function () {
      $(this).toggleClass('active');
      $('.js-header-nav').toggleClass('active');
    });
    $('.js-services-popup-opener').click(function () {
      var index = $(this).attr('data-tab-index');
      $('.js-services-popup').addClass('active');
      $('.js-services-popup-nav button, .js-services-popup-container').removeClass('active');
      $('.js-services-popup-nav button[data-tab-index="' + index + '"]').addClass('active');
      $('.js-services-popup-container[data-tab-index="' + index + '"]').addClass('active');
    });
    $('.js-services-popup-nav button').click(function () {
      var index = $(this).attr('data-tab-index');
      $('.js-services-popup-nav button, .js-services-popup-container').removeClass('active');
      $('.js-services-popup-nav button[data-tab-index="' + index + '"]').addClass('active');
      $('.js-services-popup-container[data-tab-index="' + index + '"]').addClass('active');
    });
    $('.js-services-popup-close').click(function () {
      $('.js-services-popup').removeClass('active');
    });
    $('.js-store-tabs button').click(function () {
      var index = $(this).attr('data-store-slider-index');
      $('.js-store-tabs button, .js-store-slider').removeClass('active');
      $('.js-store-slider[data-store-slider-index="' + index + '"]').addClass('active');
      $('.js-store-tabs button[data-store-slider-index="' + index + '"]').addClass('active');
    });
    var storeSliders = $('.js-store-slider');
    if (storeSliders.length) {
      storeSliders.each(function () {
        var index = $(this).attr('data-store-slider-index');
        var storeSlider = new Swiper('.js-store-slider[data-store-slider-index="' + index + '"] .swiper-container', {
          direction: 'horizontal',
          mousewheel: false,
          slidesPerView: 1.8,
          spaceBetween: 12,
          pagination: false,
          navigation: {
            nextEl: '.js-store-slider[data-store-slider-index="' + index + '"] .js-store-slider-next',
            prevEl: '.js-store-slider[data-store-slider-index="' + index + '"] .js-store-slider-prev'
          },
          breakpoints: {
            768: {
              slidesPerView: 4
            }
          }
        });
      });
    }
    var teamSlider = new Swiper('.js-team-slider .swiper-container', {
      direction: 'horizontal',
      mousewheel: false,
      slidesPerView: 1.1,
      spaceBetween: 12,
      pagination: false,
      navigation: {
        nextEl: '.js-team-slider-next',
        prevEl: '.js-team-slider-prev'
      },
      breakpoints: {
        768: {
          slidesPerView: 3
        }
      }
    });
    $(window).on('scroll', function () {
      var st = $(window).scrollTop();
      var section = $('.biomachine-future');
      var sectionST = section.offset().top;
      var sectionHeight = section.height();
      var windowHeight = $(window).height();
      var point = sectionST + sectionHeight;
      if (st >= point) {
        $('.footer').addClass('--visible');
        $('.biomachine-string__bg').addClass('--visible');
        $('.js-page-nav').addClass('--hidden');
      } else {
        $('.biomachine-string__bg').removeClass('--visible');
        $('.footer').removeClass('--visible');
        $('.js-page-nav').removeClass('--hidden');
      }
    });
    $(window).on('scroll', function () {
      var st = $(window).scrollTop();
      var section = $('.js-store-section');
      var sectionST = section.offset().top;
      var point = sectionST - 400;
      if (st >= point) {
        section.removeClass('--inverted');
        $('.biomachine-promo.--last').addClass('--inverted');
      } else {
        section.addClass('--inverted');
        $('.biomachine-promo.--last').removeClass('--inverted');
      }
    });
    $('.biomachine-string__item').each(function () {
      var item = this;
      $(window).on('scroll', function () {
        var height = $(window).height();
        height = height - 150;
        var viewportOffset = item.getBoundingClientRect();
        var top = viewportOffset.top - height;
        if (top + 150 <= 0 && top + 150 >= -Math.abs(height / 2)) {
          var percent = top * 100 / height;
          percent = +Math.abs(percent);
          percent = Math.round(percent);
          var value = 0;
          value = percent * 2;
          $(item).css('opacity', value / 100);
          if (percent >= 40) {
            $(item).removeClass('--opacity');
          }
        }
        if (top + 150 <= -Math.abs(height / 2) && top + 150 >= -Math.abs(height)) {
          var _percent = top * 100 / height;
          _percent = +Math.abs(_percent);
          _percent = Math.round(_percent);
          var _value = 0;
          if (_percent >= 50 && _percent < 55) {
            _value = 0.9;
          } else if (_percent >= 55 && _percent < 60) {
            _value = 0.8;
          } else if (_percent >= 60 && _percent < 65) {
            _value = 0.7;
          } else if (_percent >= 65 && _percent < 70) {
            _value = 0.6;
          } else if (_percent >= 70 && _percent < 75) {
            _value = 0.5;
          } else if (_percent >= 75 && _percent < 80) {
            _value = 0.4;
          } else if (_percent >= 80 && _percent < 85) {
            _value = 0.3;
          } else if (_percent >= 85 && _percent < 90) {
            _value = 0.2;
          } else if (_percent >= 90 && _percent < 95) {
            _value = 0.1;
          } else if (_percent >= 90 && _percent < 100) {
            _value = 0;
          }
          if ($(item).hasClass('--last')) {
            $('.biomachine-string__bg').css('opacity', _value);
          }
          $(item).css('opacity', _value);
        }
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdlbmVyYWwuanMiXSwibmFtZXMiOlsialF1ZXJ5IiwiJCIsImRvY3VtZW50IiwicmVhZHkiLCJjbGljayIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImluZGV4IiwiYXR0ciIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJlYWNoIiwicGxheSIsImlubmVyV2lkdGgiLCJtYWluU2xpZGVyIiwiU3dpcGVyIiwiZGlyZWN0aW9uIiwibW91c2V3aGVlbCIsInNsaWRlc1BlclZpZXciLCJwYWdpbmF0aW9uIiwiZWwiLCJjbGlja2FibGUiLCJvbiIsInNsaWRlQ2hhbmdlIiwiaW5kZXhfY3VycmVudFNsaWRlIiwicmVhbEluZGV4IiwidG9nZ2xlQ2xhc3MiLCJzdG9yZVNsaWRlcnMiLCJsZW5ndGgiLCJzdG9yZVNsaWRlciIsInNwYWNlQmV0d2VlbiIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJicmVha3BvaW50cyIsInRlYW1TbGlkZXIiLCJ3aW5kb3ciLCJzdCIsInNjcm9sbFRvcCIsInNlY3Rpb24iLCJzZWN0aW9uU1QiLCJvZmZzZXQiLCJ0b3AiLCJzZWN0aW9uSGVpZ2h0IiwiaGVpZ2h0Iiwid2luZG93SGVpZ2h0IiwicG9pbnQiLCJpdGVtIiwidmlld3BvcnRPZmZzZXQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJNYXRoIiwiYWJzIiwicGVyY2VudCIsInJvdW5kIiwidmFsdWUiLCJjc3MiLCJoYXNDbGFzcyJdLCJtYXBwaW5ncyI6Ijs7QUFBQUEsTUFBTSxDQUFDLFVBQVVDLENBQUMsRUFBRTtFQUNoQkEsQ0FBQyxDQUFDQyxRQUFRLENBQUMsQ0FBQ0MsS0FBSyxDQUFDLFlBQVk7SUFFMUJGLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDRyxLQUFLLENBQUMsVUFBVUMsQ0FBQyxFQUFFO01BQ3ZDQSxDQUFDLENBQUNDLGNBQWMsQ0FBQyxDQUFDO01BQ2pCLElBQUlDLEtBQUssR0FBR04sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDTyxJ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QUFHLEVBQUUsRUFBRTtZQUN0Q0UsTUFBSyxHQUFHLEdBQUc7VUFDZixDQUFDLE1BQU0sSUFBSUYsUUFBTyxJQUFJLEVBQUUsSUFBSUEsUUFBTyxHQUFHLEVBQUUsRUFBRTtZQUN0Q0UsTUFBSyxHQUFHLEdBQUc7VUFDZixDQUFDLE1BQU0sSUFBSUYsUUFBTyxJQUFJLEVBQUUsSUFBSUEsUUFBTyxHQUFHLEVBQUUsRUFBRTtZQUN0Q0UsTUFBSyxHQUFHLEdBQUc7VUFDZixDQUFDLE1BQU0sSUFBSUYsUUFBTyxJQUFJLEVBQUUsSUFBSUEsUUFBTyxHQUFHLEVBQUUsRUFBRTtZQUN0Q0UsTUFBSyxHQUFHLEdBQUc7VUFDZixDQUFDLE1BQU0sSUFBSUYsUUFBTyxJQUFJLEVBQUUsSUFBSUEsUUFBTyxHQUFHLEVBQUUsRUFBRTtZQUN0Q0UsTUFBSyxHQUFHLEdBQUc7VUFDZixDQUFDLE1BQU0sSUFBSUYsUUFBTyxJQUFJLEVBQUUsSUFBSUEsUUFBTyxHQUFHLEdBQUcsRUFBRTtZQUN2Q0UsTUFBSyxHQUFHLENBQUM7VUFDYjtVQUVBLElBQUlyRCxDQUFDLENBQUM4QyxJQUFJLENBQUMsQ0FBQ1MsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQzVCdkQsQ0FBQyxDQUFDLHdCQUF3QixDQUFDLENBQUNzRCxHQUFHLENBQUMsU0FBUyxFQUFFRCxNQUFLLENBQUM7VUFDckQ7VUFFQXJELENBQUMsQ0FBQzhDLElBQUksQ0FBQyxDQUFDUSxHQUFHLENBQUMsU0FBUyxFQUFFRCxNQUFLLENBQUM7UUFDakM7TUFDSixDQUFDLENBQUM7SUFDTixDQUFDLENBQUM7RUFFTixDQUFDLENBQUM7QUFDTixDQUFDLENBQUMiLCJmaWxlIjoiYnVpbGQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsialF1ZXJ5KGZ1bmN0aW9uICgkKSB7XG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICQoJy5qcy1wYWdlLW5hdiBsaSBhJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gJCh0aGlzKS5hdHRyKCdkYXRhLXBhZ2UtbmF2LWluZGV4Jyk7XG4gICAgICAgICAgICAkKCcuanMtcGFnZS1uYXYtcG9wdXAnKS5hZGRDbGFzcygnLS1hY3RpdmUnKTtcbiAgICAgICAgICAgICQoJy5qcy1wYWdlLW5hdi1wb3B1cCAuanMtcGFnZS1uYXYtaW5uZXJbZGF0YS1wYWdlLW5hdi1pbmRleD1cIicrIGluZGV4ICsnXCJdJykuYWRkQ2xhc3MoJy0tYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcuanMtcGFnZS1uYXYtcG9wdXAgLmpzLWNsb3NlJykuY2xpY2soZnVuY3Rpb24gKCl7XG4gICAgICAgICAgICAkKCcuanMtcGFnZS1uYXYtcG9wdXAsIC5qcy1wYWdlLW5hdi1pbm5lcicpLnJlbW92ZUNsYXNzKCctLWFjdGl2ZScpO1xuICAgICAgICB9KVxuXG4gICAgICAgICQoXCJ2aWRlb1thdXRvcGxheV1cIikuZWFjaChmdW5jdGlvbigpeyB0aGlzLnBsYXkoKTsgfSk7XG5cbiAgICAgICAgaWYgKGlubmVyV2lkdGggPiAxMDI0KSB7XG4gICAgICAgICAgICBsZXQgbWFpblNsaWRlciA9IG5ldyBTd2lwZXIoJy5tYWluLXNsaWRlciAuc3dpcGVyLWNvbnRhaW5lcicsIHtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXG4gICAgICAgICAgICAgICAgbW91c2V3aGVlbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICBjbGlja2FibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlQ2hhbmdlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleF9jdXJyZW50U2xpZGUgPSB0aGlzLnJlYWxJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5qcy1tYWluLXNsaWRlci10YWJzIGxpIGJ1dHRvbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5qcy1tYWluLXNsaWRlci10YWJzIGxpIGJ1dHRvbltkYXRhLXNsaWRlLWluZGV4PScgKyAoaW5kZXhfY3VycmVudFNsaWRlICsgMSkgKyAnXScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQoJy5qcy1tYWluLXNsaWRlci10YWJzIGxpIGJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAkKHRoaXMpLmF0dHIoJ2RhdGEtc2xpZGUtaW5kZXgnKTtcbiAgICAgICAgICAgICAgICAkKCcuanMtbWFpbi1zbGlkZXItdGFicyBsaSBidXR0b24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJCgnLm1haW4tc2xpZGVyIC5zd2lwZXItcGFnaW5hdGlvbi1idWxsZXQ6bnRoLWNoaWxkKCcgKyBpbmRleCArICcpJykuY2xpY2soKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgJCgnLmpzLW5hdi1vcGVuJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcuanMtaGVhZGVyLW5hdicpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLmpzLXNlcnZpY2VzLXBvcHVwLW9wZW5lcicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxldCBpbmRleCA9ICQodGhpcykuYXR0cignZGF0YS10YWItaW5kZXgnKTtcbiAgICAgICAgICAgICQoJy5qcy1zZXJ2aWNlcy1wb3B1cCcpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICQoJy5qcy1zZXJ2aWNlcy1wb3B1cC1uYXYgYnV0dG9uLCAuanMtc2VydmljZXMtcG9wdXAtY29udGFpbmVyJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCgnLmpzLXNlcnZpY2VzLXBvcHVwLW5hdiBidXR0b25bZGF0YS10YWItaW5kZXg9XCInICsgaW5kZXggKyAnXCJdJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCgnLmpzLXNlcnZpY2VzLXBvcHVwLWNvbnRhaW5lcltkYXRhLXRhYi1pbmRleD1cIicgKyBpbmRleCArICdcIl0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJy5qcy1zZXJ2aWNlcy1wb3B1cC1uYXYgYnV0dG9uJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gJCh0aGlzKS5hdHRyKCdkYXRhLXRhYi1pbmRleCcpO1xuICAgICAgICAgICAgJCgnLmpzLXNlcnZpY2VzLXBvcHVwLW5hdiBidXR0b24sIC5qcy1zZXJ2aWNlcy1wb3B1cC1jb250YWluZXInKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcuanMtc2VydmljZXMtcG9wdXAtbmF2IGJ1dHRvbltkYXRhLXRhYi1pbmRleD1cIicgKyBpbmRleCArICdcIl0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcuanMtc2VydmljZXMtcG9wdXAtY29udGFpbmVyW2RhdGEtdGFiLWluZGV4PVwiJyArIGluZGV4ICsgJ1wiXScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLmpzLXNlcnZpY2VzLXBvcHVwLWNsb3NlJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnLmpzLXNlcnZpY2VzLXBvcHVwJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKCcuanMtc3RvcmUtdGFicyBidXR0b24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgaW5kZXggPSAkKHRoaXMpLmF0dHIoJ2RhdGEtc3RvcmUtc2xpZGVyLWluZGV4Jyk7XG4gICAgICAgICAgICAkKCcuanMtc3RvcmUtdGFicyBidXR0b24sIC5qcy1zdG9yZS1zbGlkZXInKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcuanMtc3RvcmUtc2xpZGVyW2RhdGEtc3RvcmUtc2xpZGVyLWluZGV4PVwiJyArIGluZGV4ICsgJ1wiXScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICQoJy5qcy1zdG9yZS10YWJzIGJ1dHRvbltkYXRhLXN0b3JlLXNsaWRlci1pbmRleD1cIicgKyBpbmRleCArICdcIl0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBzdG9yZVNsaWRlcnMgPSAkKCcuanMtc3RvcmUtc2xpZGVyJyk7XG5cbiAgICAgICAgaWYgKHN0b3JlU2xpZGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHN0b3JlU2xpZGVycy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAkKHRoaXMpLmF0dHIoJ2RhdGEtc3RvcmUtc2xpZGVyLWluZGV4Jyk7XG4gICAgICAgICAgICAgICAgbGV0IHN0b3JlU2xpZGVyID0gbmV3IFN3aXBlcignLmpzLXN0b3JlLXNsaWRlcltkYXRhLXN0b3JlLXNsaWRlci1pbmRleD1cIicgKyBpbmRleCArICdcIl0gLnN3aXBlci1jb250YWluZXInLCB7XG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxuICAgICAgICAgICAgICAgICAgICBtb3VzZXdoZWVsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMS44LFxuICAgICAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDEyLFxuICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEVsOiAnLmpzLXN0b3JlLXNsaWRlcltkYXRhLXN0b3JlLXNsaWRlci1pbmRleD1cIicgKyBpbmRleCArICdcIl0gLmpzLXN0b3JlLXNsaWRlci1uZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZFbDogJy5qcy1zdG9yZS1zbGlkZXJbZGF0YS1zdG9yZS1zbGlkZXItaW5kZXg9XCInICsgaW5kZXggKyAnXCJdIC5qcy1zdG9yZS1zbGlkZXItcHJldidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtwb2ludHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIDc2ODoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0ZWFtU2xpZGVyID0gbmV3IFN3aXBlcignLmpzLXRlYW0tc2xpZGVyIC5zd2lwZXItY29udGFpbmVyJywge1xuICAgICAgICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXG4gICAgICAgICAgICBtb3VzZXdoZWVsOiBmYWxzZSxcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDEuMSxcbiAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMTIsXG4gICAgICAgICAgICBwYWdpbmF0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgICAgICBuZXh0RWw6ICcuanMtdGVhbS1zbGlkZXItbmV4dCcsXG4gICAgICAgICAgICAgICAgcHJldkVsOiAnLmpzLXRlYW0tc2xpZGVyLXByZXYnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYnJlYWtwb2ludHM6IHtcbiAgICAgICAgICAgICAgICA3Njg6IHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICAkKHdpbmRvdykub24oJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxldCBzdCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAgICAgICAgIGxldCBzZWN0aW9uID0gJCgnLmJpb21hY2hpbmUtZnV0dXJlJylcbiAgICAgICAgICAgIGxldCBzZWN0aW9uU1QgPSBzZWN0aW9uLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgIGxldCBzZWN0aW9uSGVpZ2h0ID0gc2VjdGlvbi5oZWlnaHQoKTtcbiAgICAgICAgICAgIGxldCB3aW5kb3dIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG4gICAgICAgICAgICBsZXQgcG9pbnQgPSAoc2VjdGlvblNUICsgc2VjdGlvbkhlaWdodCk7XG5cbiAgICAgICAgICAgIGlmIChzdCA+PSBwb2ludCkge1xuICAgICAgICAgICAgICAgICQoJy5mb290ZXInKS5hZGRDbGFzcygnLS12aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgJCgnLmJpb21hY2hpbmUtc3RyaW5nX19iZycpLmFkZENsYXNzKCctLXZpc2libGUnKTtcbiAgICAgICAgICAgICAgICAkKCcuanMtcGFnZS1uYXYnKS5hZGRDbGFzcygnLS1oaWRkZW4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLmJpb21hY2hpbmUtc3RyaW5nX19iZycpLnJlbW92ZUNsYXNzKCctLXZpc2libGUnKTtcbiAgICAgICAgICAgICAgICAkKCcuZm9vdGVyJykucmVtb3ZlQ2xhc3MoJy0tdmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICQoJy5qcy1wYWdlLW5hdicpLnJlbW92ZUNsYXNzKCctLWhpZGRlbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkKHdpbmRvdykub24oJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxldCBzdCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAgICAgICAgIGxldCBzZWN0aW9uID0gJCgnLmpzLXN0b3JlLXNlY3Rpb24nKVxuICAgICAgICAgICAgbGV0IHNlY3Rpb25TVCA9IHNlY3Rpb24ub2Zmc2V0KCkudG9wO1xuICAgICAgICAgICAgbGV0IHBvaW50ID0gc2VjdGlvblNUIC0gNDAwO1xuXG4gICAgICAgICAgICBpZiAoc3QgPj0gcG9pbnQpIHtcbiAgICAgICAgICAgICAgICBzZWN0aW9uLnJlbW92ZUNsYXNzKCctLWludmVydGVkJyk7XG4gICAgICAgICAgICAgICAgJCgnLmJpb21hY2hpbmUtcHJvbW8uLS1sYXN0JykuYWRkQ2xhc3MoJy0taW52ZXJ0ZWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VjdGlvbi5hZGRDbGFzcygnLS1pbnZlcnRlZCcpO1xuICAgICAgICAgICAgICAgICQoJy5iaW9tYWNoaW5lLXByb21vLi0tbGFzdCcpLnJlbW92ZUNsYXNzKCctLWludmVydGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgJCgnLmJpb21hY2hpbmUtc3RyaW5nX19pdGVtJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgaXRlbSA9IHRoaXM7XG5cbiAgICAgICAgICAgICQod2luZG93KS5vbignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGxldCBoZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gaGVpZ2h0IC0gMTUwO1xuICAgICAgICAgICAgICAgIGxldCB2aWV3cG9ydE9mZnNldCA9IGl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgbGV0IHRvcCA9IHZpZXdwb3J0T2Zmc2V0LnRvcCAtIGhlaWdodDtcbiAgICAgICAgICAgICAgICBpZiAoKHRvcCArIDE1MCkgPD0gMCAmJiAodG9wICsgMTUwKSA+PSAtTWF0aC5hYnMoaGVpZ2h0IC8gMikpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBlcmNlbnQgPSAodG9wICogMTAwKSAvIGhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudCA9ICtNYXRoLmFicyhwZXJjZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudCA9IE1hdGgucm91bmQocGVyY2VudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwZXJjZW50ICogMjtcbiAgICAgICAgICAgICAgICAgICAgJChpdGVtKS5jc3MoJ29wYWNpdHknLCB2YWx1ZSAvIDEwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlcmNlbnQgPj0gNDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoaXRlbSkucmVtb3ZlQ2xhc3MoJy0tb3BhY2l0eScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCh0b3AgKyAxNTApIDw9IC1NYXRoLmFicyhoZWlnaHQgLyAyKSAmJiAodG9wICsgMTUwKSA+PSAtTWF0aC5hYnMoaGVpZ2h0KSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGVyY2VudCA9ICh0b3AgKiAxMDApIC8gaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBwZXJjZW50ID0gK01hdGguYWJzKHBlcmNlbnQpO1xuICAgICAgICAgICAgICAgICAgICBwZXJjZW50ID0gTWF0aC5yb3VuZChwZXJjZW50KTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gMDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocGVyY2VudCA+PSA1MCAmJiBwZXJjZW50IDwgNTUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gMC45O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBlcmNlbnQgPj0gNTUgJiYgcGVyY2VudCA8IDYwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IDAuODtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwZXJjZW50ID49IDYwICYmIHBlcmNlbnQgPCA2NSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAwLjc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGVyY2VudCA+PSA2NSAmJiBwZXJjZW50IDwgNzApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gMC42O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBlcmNlbnQgPj0gNzAgJiYgcGVyY2VudCA8IDc1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IDAuNTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwZXJjZW50ID49IDc1ICYmIHBlcmNlbnQgPCA4MCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAwLjQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGVyY2VudCA+PSA4MCAmJiBwZXJjZW50IDwgODUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gMC4zO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBlcmNlbnQgPj0gODUgJiYgcGVyY2VudCA8IDkwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IDAuMjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwZXJjZW50ID49IDkwICYmIHBlcmNlbnQgPCA5NSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAwLjE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGVyY2VudCA+PSA5MCAmJiBwZXJjZW50IDwgMTAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoJChpdGVtKS5oYXNDbGFzcygnLS1sYXN0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5iaW9tYWNoaW5lLXN0cmluZ19fYmcnKS5jc3MoJ29wYWNpdHknLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkKGl0ZW0pLmNzcygnb3BhY2l0eScsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcblxuICAgIH0pO1xufSk7Il19