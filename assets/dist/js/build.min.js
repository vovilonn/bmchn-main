"use strict";

jQuery(function ($) {
  $(document).ready(function () {
    $("video[autoplay]").each(function () {
      this.play();
    });
    if (innerWidth > 1024) {
      var mainSlider = new Swiper('.main-slider .swiper-container', {
        direction: 'vertical',
        effect: 'fade',
        mousewheel: true,
        slidesPerView: 1,
        pagination: {
          el: '.swiper-pagination',
          clickable: true
        },
        on: {
          slideChange: function slideChange() {
            var index_currentSlide = this.realIndex;
            $('.js-main-slider-tabs li button').removeClass('active');
            $('.js-main-slider-tabs li button[data-slide-index=' + (index_currentSlide + 1) + ']').addClass('active');
          }
        }
      });
      $('.js-main-slider-tabs li button').click(function () {
        var index = $(this).attr('data-slide-index');
        $('.js-main-slider-tabs li button').removeClass('active');
        $(this).addClass('active');
        $('.main-slider .swiper-pagination-bullet:nth-child(' + index + ')').click();
      });
    }
    $('.js-nav-open').click(function () {
      $(this).toggleClass('active');
      $('.js-header-nav').toggleClass('active');
    });
    $('.js-services-popup-opener').click(function () {
      var index = $(this).attr('data-tab-index');
      $('.js-services-popup').addClass('active');
      $('.js-services-popup-nav button, .js-services-popup-container').removeClass('active');
      $('.js-services-popup-nav button[data-tab-index="' + index + '"]').addClass('active');
      $('.js-services-popup-container[data-tab-index="' + index + '"]').addClass('active');
    });
    $('.js-services-popup-nav button').click(function () {
      var index = $(this).attr('data-tab-index');
      $('.js-services-popup-nav button, .js-services-popup-container').removeClass('active');
      $('.js-services-popup-nav button[data-tab-index="' + index + '"]').addClass('active');
      $('.js-services-popup-container[data-tab-index="' + index + '"]').addClass('active');
    });
    $('.js-services-popup-close').click(function () {
      $('.js-services-popup').removeClass('active');
    });
    $('.js-store-tabs button').click(function () {
      var index = $(this).attr('data-store-slider-index');
      $('.js-store-tabs button, .js-store-slider').removeClass('active');
      $('.js-store-slider[data-store-slider-index="' + index + '"]').addClass('active');
      $('.js-store-tabs button[data-store-slider-index="' + index + '"]').addClass('active');
    });
    var storeSliders = $('.js-store-slider');
    if (storeSliders.length) {
      storeSliders.each(function () {
        var index = $(this).attr('data-store-slider-index');
        var storeSlider = new Swiper('.js-store-slider[data-store-slider-index="' + index + '"] .swiper-container', {
          direction: 'horizontal',
          mousewheel: false,
          slidesPerView: 4,
          spaceBetween: 12,
          pagination: false,
          navigation: {
            nextEl: '.js-store-slider[data-store-slider-index="' + index + '"] .js-store-slider-next',
            prevEl: '.js-store-slider[data-store-slider-index="' + index + '"] .js-store-slider-prev'
          }
        });
      });
    }
    var storeSlider = new Swiper('.js-team-slider .swiper-container', {
      direction: 'horizontal',
      mousewheel: false,
      slidesPerView: 3,
      spaceBetween: 12,
      pagination: false,
      navigation: {
        nextEl: '.js-team-slider-next',
        prevEl: '.js-team-slider-prev'
      }
    });
    $(window).on('scroll', function () {
      var st = $(window).scrollTop();
      var section = $('.biomachine-future');
      var sectionST = section.offset().top;
      var sectionHeight = section.height();
      var windowHeight = $(window).height();
      var point = sectionST + sectionHeight - windowHeight;
      if (st >= point) {
        $('.footer').addClass('--visible');
        $('.biomachine-string__bg').addClass('--visible');
        $('.js-page-nav').addClass('--hidden');
      } else {
        $('.biomachine-string__bg').removeClass('--visible');
        $('.footer').removeClass('--visible');
        $('.js-page-nav').removeClass('--hidden');
      }
    });
    $(window).on('scroll', function () {
      var st = $(window).scrollTop();
      var section = $('.js-store-section');
      var sectionST = section.offset().top;
      var point = sectionST - 200;
      if (st >= point) {
        section.removeClass('--inverted');
        $('.biomachine-promo.--last').addClass('--inverted');
      } else {
        section.addClass('--inverted');
        $('.biomachine-promo.--last').removeClass('--inverted');
      }
    });
    $('.biomachine-string__item').each(function () {
      var item = this;
      $(window).on('scroll', function () {
        var height = $(window).height();
        height = height - 150;
        var viewportOffset = item.getBoundingClientRect();
        var top = viewportOffset.top - height;
        if (top + 150 <= 0 && top + 150 >= -Math.abs(height / 2)) {
          var percent = top * 100 / height;
          percent = +Math.abs(percent);
          percent = Math.round(percent);
          var value = 0;
          value = percent * 2;
          $(item).css('opacity', value / 100);
          if (percent >= 40) {
            $(item).removeClass('--opacity');
          }
        }
        if (top + 150 <= -Math.abs(height / 2) && top + 150 >= -Math.abs(height)) {
          var _percent = top * 100 / height;
          _percent = +Math.abs(_percent);
          _percent = Math.round(_percent);
          var _value = 0;
          if (_percent >= 50 && _percent < 55) {
            _value = 0.9;
          } else if (_percent >= 55 && _percent < 60) {
            _value = 0.8;
          } else if (_percent >= 60 && _percent < 65) {
            _value = 0.7;
          } else if (_percent >= 65 && _percent < 70) {
            _value = 0.6;
          } else if (_percent >= 70 && _percent < 75) {
            _value = 0.5;
          } else if (_percent >= 75 && _percent < 80) {
            _value = 0.4;
          } else if (_percent >= 80 && _percent < 85) {
            _value = 0.3;
          } else if (_percent >= 85 && _percent < 90) {
            _value = 0.2;
          } else if (_percent >= 90 && _percent < 95) {
            _value = 0.1;
          } else if (_percent >= 90 && _percent < 100) {
            _value = 0;
          }
          if ($(item).hasClass('--last')) {
            $('.biomachine-string__bg').css('opacity', _value);
          }
          $(item).css('opacity', _value);
        }
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdlbmVyYWwuanMiXSwibmFtZXMiOlsialF1ZXJ5IiwiJCIsImRvY3VtZW50IiwicmVhZHkiLCJlYWNoIiwicGxheSIsImlubmVyV2lkdGgiLCJtYWluU2xpZGVyIiwiU3dpcGVyIiwiZGlyZWN0aW9uIiwiZWZmZWN0IiwibW91c2V3aGVlbCIsInNsaWRlc1BlclZpZXciLCJwYWdpbmF0aW9uIiwiZWwiLCJjbGlja2FibGUiLCJvbiIsInNsaWRlQ2hhbmdlIiwiaW5kZXhfY3VycmVudFNsaWRlIiwicmVhbEluZGV4IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImNsaWNrIiwiaW5kZXgiLCJhdHRyIiwidG9nZ2xlQ2xhc3MiLCJzdG9yZVNsaWRlcnMiLCJsZW5ndGgiLCJzdG9yZVNsaWRlciIsInNwYWNlQmV0d2VlbiIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJ3aW5kb3ciLCJzdCIsInNjcm9sbFRvcCIsInNlY3Rpb24iLCJzZWN0aW9uU1QiLCJvZmZzZXQiLCJ0b3AiLCJzZWN0aW9uSGVpZ2h0IiwiaGVpZ2h0Iiwid2luZG93SGVpZ2h0IiwicG9pbnQiLCJpdGVtIiwidmlld3BvcnRPZmZzZXQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJNYXRoIiwiYWJzIiwicGVyY2VudCIsInJvdW5kIiwidmFsdWUiLCJjc3MiLCJoYXNDbGFzcyJdLCJtYXBwaW5ncyI6Ijs7QUFBQUEsTUFBTSxDQUFDLFVBQVVDLENBQUMsRUFBRTtFQUNoQkEsQ0FBQyxDQUFDQyxRQUFRLENBQUMsQ0FBQ0MsS0FBSyxDQUFDLFlBQVk7SUFFMUJGLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDRyxJQUFJLENBQUMsWUFBVTtNQUFFLElBQUksQ0FBQ0MsSUFBSSxDQUFDLENBQUM7SUFBRSxDQUFDLENBQUM7SUFFckQsSUFBSUMsVUFBVSxHQUFHLElBQUksRUFBRTtNQUNuQixJQUFJQyxVQUFVLEdBQUcsSUFBSUMsTUFBTSxDQUFDLGdDQUFnQyxFQUFFO1FBQzFEQyxTQUFTLEVBQUUsVUFBVTtRQUNyQkMsTUFBTSxFQUFFLE1BQU07UUFDZEMsVUFBVSxFQUFFLElBQUk7UUFDaEJDLGFBQWEsRUFBRSxDQUFDO1FBQ2hCQyxVQUFVLEVBQUU7VUFDUkMsRUFBRSxFQUFFLG9CQUFvQjtVQUN4QkMsU0FBUyxFQUFFO1FBQ2YsQ0FBQztRQUNEQyxFQUFFLEVBQUU7VUFDQUMsV0FBVyxFQUFFLFNBQUFBLFlBQUEsRUFBWTtZQUNyQixJQUFNQyxrQkFBa0IsR0FBRyxJQUFJLENBQUNDLFNBQVM7WUFDekNsQixDQUFDLENBQUMsZ0NBQWdDLENBQUMsQ0FBQ21CLFdBQVcsQ0FBQyxRQUFRLENBQUM7WUFDekRuQixDQUFDLENBQUMsa0RBQWtELElBQUlpQixrQkFBa0IsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQ0csUUFBUSxDQUFDLFFBQVEsQ0FBQztVQUM3RztRQUNKO01BQ0osQ0FBQyxDQUFDO01BRUZwQixDQUFDLENBQUMsZ0NBQWdDLENBQUMsQ0FBQ3FCLEtBQUssQ0FBQyxZQUFZO1FBQ2xELElBQUlDLEtBQUssR0FBR3RCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQ3VCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztRQUM1Q3ZCLENBQUMsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDbUIsV0FBVyxDQUFDLFFBQVEsQ0FBQztRQUN6RG5CLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQ29CLFFBQVEsQ0FBQyxRQUFRLENBQUM7UUFDMUJwQixDQUFDLENBQUMsbURBQW1ELEdBQUdzQixLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUNELEtBQUssQ0FBQyxDQUFDO01BQ2hGLENBQUMsQ0FBQztJQUNOO0lBRUFyQixDQUFDLENBQUMsY0FBYyxDQUFDLENBQUNxQixLQUFLLENBQUMsWUFBWTtNQUNoQ3JCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQ3dCLFdBQVcsQ0FBQyxRQUFRLENBQUM7TUFDN0J4QixDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQ3dCLFdBQVcsQ0FBQyxRQUFRLENBQUM7SUFDN0MsQ0FBQyxDQUFDO0lBRUZ4QixDQUFDLENBQUMsMkJBQTJCLENBQUMsQ0FBQ3FCLEtBQUssQ0FBQyxZQUFZO01BQzdDLElBQUlDLEtBQUssR0FBR3RCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQ3VCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztNQUMxQ3ZCLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDb0IsUUFBUSxDQUFDLFFBQVEsQ0FBQztNQUMxQ3BCLENBQUMsQ0FBQyw2REFBNkQsQ0FBQyxDQUFDbUIsV0FBVyxDQUFDLFFBQVEsQ0FBQztNQUN0Rm5CLENBQUMsQ0FBQyxnREFBZ0QsR0FBR3NCLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQ0YsUUFBUSxDQUFDLFFBQVEsQ0FBQztNQUNyRnBCLENBQUMsQ0FBQywrQ0FBK0MsR0FBR3NCLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQ0YsUUFBUSxDQUFDLFFBQVEsQ0FBQztJQUN4RixDQUFDLENBQUM7SUFFRnBCLENBQUMsQ0FBQywrQkFBK0IsQ0FBQyxDQUFDcUIsS0FBSyxDQUFDLFlBQVk7TUFDakQsSUFBSUMsS0FBSyxHQUFHdEIsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDdUIsSUFBSSxDQUFDLGdCQUFnQixDQUFDO01BQzFDdkIsQ0FBQyxDQUFDLDZEQUE2RCxDQUFDLENBQUNtQixXQUFXLENBQUMsUUFBUSxDQUFDO01BQ3RGbkIsQ0FBQyxDQUFDLGdEQUFnRCxHQUFHc0IsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDRixRQUFRLENBQUMsUUFBUSxDQUFDO01BQ3JGcEIsQ0FBQyxDQUFDLCtDQUErQyxHQUFHc0IsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDRixRQUFRLENBQUMsUUFBUSxDQUFDO0lBQ3hGLENBQUMsQ0FBQztJQUVGcEIsQ0FBQyxDQUFDLDBCQUEwQixDQUFDLENBQUNxQixLQUFLLENBQUMsWUFBWTtNQUM1Q3JCLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDbUIsV0FBVyxDQUFDLFFBQVEsQ0FBQztJQUNqRCxDQUFDLENBQUM7SUFFRm5CLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDcUIsS0FBSyxDQUFDLFlBQVk7TUFDekMsSUFBSUMsS0FBSyxHQUFHdEIsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDdUIsSUFBSSxDQUFDLHlCQUF5QixDQUFDO01BQ25EdkIsQ0FBQyxDQUFDLHlDQUF5QyxDQUFDLENBQUNtQixXQUFXLENBQUMsUUFBUSxDQUFDO01BQ2xFbkIsQ0FBQyxDQUFDLDRDQUE0QyxHQUFHc0IsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDRixRQUFRLENBQUMsUUFBUSxDQUFDO01BQ2pGcEIsQ0FBQyxDQUFDLGlEQUFpRCxHQUFHc0IsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDRixRQUFRLENBQUMsUUFBUSxDQUFDO0lBQzFGLENBQUMsQ0FBQztJQUVGLElBQUlLLFlBQVksR0FBR3pCLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQztJQUV4QyxJQUFJeUIsWUFBWSxDQUFDQyxNQUFNLEVBQUU7TUFDckJELFlBQVksQ0FBQ3RCLElBQUksQ0FBQyxZQUFZO1FBQzFCLElBQUltQixLQUFLLEdBQUd0QixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUN1QixJQUFJLENBQUMseUJBQXlCLENBQUM7UUFDbkQsSUFBSUksV0FBVyxHQUFHLElBQUlwQixNQUFNLENBQUMsNENBQTRDLEdBQUdlLEtBQUssR0FBRyxzQkFBc0IsRUFBRTtVQUN4R2QsU0FBUyxFQUFFLFlBQVk7VUFDdkJFLFVBQVUsRUFBRSxLQUFLO1VBQ2pCQyxhQUFhLEVBQUUsQ0FBQztVQUNoQmlCLFlBQVksRUFBRSxFQUFFO1VBQ2hCaEIsVUFBVSxFQUFFLEtBQUs7VUFDakJpQixVQUFVLEVBQUU7WUFDUkMsTUFBTSxFQUFFLDRDQUE0QyxHQUFHUixLQUFLLEdBQUcsMEJBQTBCO1lBQ3pGUyxNQUFNLEVBQUUsNENBQTRDLEdBQUdULEtBQUssR0FBRztVQUNuRTtRQUNKLENBQUMsQ0FBQztNQUNOLENBQUMsQ0FBQztJQUNOO0lBRUEsSUFBSUssV0FBVyxHQUFHLElBQUlwQixNQUFNLENBQUMsbUNBQW1DLEVBQUU7TUFDOURDLFNBQVMsRUFBRSxZQUFZO01BQ3ZCRSxVQUFVLEVBQUUsS0FBSztNQUNqQkMsYUFBYSxFQUFFLENBQUM7TUFDaEJpQixZQUFZLEVBQUUsRUFBRTtNQUNoQmhCLFVBQVUsRUFBRSxLQUFLO01BQ2pCaUIsVUFBVSxFQUFFO1FBQ1JDLE1BQU0sRUFBRSxzQkFBc0I7UUFDOUJDLE1BQU0sRUFBRTtNQUNaO0lBQ0osQ0FBQyxDQUFDO0lBRUYvQixDQUFDLENBQUNnQyxNQUFNLENBQUMsQ0FBQ2pCLEVBQUUsQ0FBQyxRQUFRLEVBQUUsWUFBWTtNQUMvQixJQUFJa0IsRUFBRSxHQUFHakMsQ0FBQyxDQUFDZ0MsTUFBTSxDQUFDLENBQUNFLFNBQVMsQ0FBQyxDQUFDO01BQzlCLElBQUlDLE9BQU8sR0FBR25DLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQztNQUNyQyxJQUFJb0MsU0FBUyxHQUFHRCxPQUFPLENBQUNFLE1BQU0sQ0FBQyxDQUFDLENBQUNDLEdBQUc7TUFDcEMsSUFBSUMsYUFBYSxHQUFHSixPQUFPLENBQUNLLE1BQU0sQ0FBQyxDQUFDO01BQ3BDLElBQUlDLFlBQVksR0FBR3pDLENBQUMsQ0FBQ2dDLE1BQU0sQ0FBQyxDQUFDUSxNQUFNLENBQUMsQ0FBQztNQUNyQyxJQUFJRSxLQUFLLEdBQUlOLFNBQVMsR0FBR0csYUFBYSxHQUFJRSxZQUFZO01BRXRELElBQUlSLEVBQUUsSUFBSVMsS0FBSyxFQUFFO1FBQ2IxQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUNvQixRQUFRLENBQUMsV0FBVyxDQUFDO1FBQ2xDcEIsQ0FBQyxDQUFDLHdCQUF3QixDQUFDLENBQUNvQixRQUFRLENBQUMsV0FBVyxDQUFDO1FBQ2pEcEIsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDb0IsUUFBUSxDQUFDLFVBQVUsQ0FBQztNQUMxQyxDQUFDLE1BQU07UUFDSHBCLENBQUMsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDbUIsV0FBVyxDQUFDLFdBQVcsQ0FBQztRQUNwRG5CLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQ21CLFdBQVcsQ0FBQyxXQUFXLENBQUM7UUFDckNuQixDQUFDLENBQUMsY0FBYyxDQUFDLENBQUNtQixXQUFXLENBQUMsVUFBVSxDQUFDO01BQzdDO0lBQ0osQ0FBQyxDQUFDO0lBRUZuQixDQUFDLENBQUNnQyxNQUFNLENBQUMsQ0FBQ2pCLEVBQUUsQ0FBQyxRQUFRLEVBQUUsWUFBWTtNQUMvQixJQUFJa0IsRUFBRSxHQUFHakMsQ0FBQyxDQUFDZ0MsTUFBTSxDQUFDLENBQUNFLFNBQVMsQ0FBQyxDQUFDO01BQzlCLElBQUlDLE9BQU8sR0FBR25DLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQztNQUNwQyxJQUFJb0MsU0FBUyxHQUFHRCxPQUFPLENBQUNFLE1BQU0sQ0FBQyxDQUFDLENBQUNDLEdBQUc7TUFDcEMsSUFBSUksS0FBSyxHQUFHTixTQUFTLEdBQUcsR0FBRztNQUUzQixJQUFJSCxFQUFFLElBQUlTLEtBQUssRUFBRTtRQUNiUCxPQUFPLENBQUNoQixXQUFXLENBQUMsWUFBWSxDQUFDO1FBQ2pDbkIsQ0FBQyxDQUFDLDBCQUEwQixDQUFDLENBQUNvQixRQUFRLENBQUMsWUFBWSxDQUFDO01BQ3hELENBQUMsTUFBTTtRQUNIZSxPQUFPLENBQUNmLFFBQVEsQ0FBQyxZQUFZLENBQUM7UUFDOUJwQixDQUFDLENBQUMsMEJBQTBCLENBQUMsQ0FBQ21CLFdBQVcsQ0FBQyxZQUFZLENBQUM7TUFDM0Q7SUFDSixDQUFDLENBQUM7SUFHRm5CLENBQUMsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDRyxJQUFJLENBQUMsWUFBWTtNQUMzQyxJQUFJd0MsSUFBSSxHQUFHLElBQUk7TUFFZjNDLENBQUMsQ0FBQ2dDLE1BQU0sQ0FBQyxDQUFDakIsRUFBRSxDQUFDLFFBQVEsRUFBRSxZQUFZO1FBQy9CLElBQUl5QixNQUFNLEdBQUd4QyxDQUFDLENBQUNnQyxNQUFNLENBQUMsQ0FBQ1EsTUFBTSxDQUFDLENBQUM7UUFDL0JBLE1BQU0sR0FBR0EsTUFBTSxHQUFHLEdBQUc7UUFDckIsSUFBSUksY0FBYyxHQUFHRCxJQUFJLENBQUNFLHFCQUFxQixDQUFDLENBQUM7UUFDakQsSUFBSVAsR0FBRyxHQUFHTSxjQUFjLENBQUNOLEdBQUcsR0FBR0UsTUFBTTtRQUNyQyxJQUFLRixHQUFHLEdBQUcsR0FBRyxJQUFLLENBQUMsSUFBS0EsR0FBRyxHQUFHLEdBQUcsSUFBSyxDQUFDUSxJQUFJLENBQUNDLEdBQUcsQ0FBQ1AsTUFBTSxHQUFHLENBQUMsQ0FBQyxFQUFFO1VBQzFELElBQUlRLE9BQU8sR0FBSVYsR0FBRyxHQUFHLEdBQUcsR0FBSUUsTUFBTTtVQUNsQ1EsT0FBTyxHQUFHLENBQUNGLElBQUksQ0FBQ0MsR0FBRyxDQUFDQyxPQUFPLENBQUM7VUFDNUJBLE9BQU8sR0FBR0YsSUFBSSxDQUFDRyxLQUFLLENBQUNELE9BQU8sQ0FBQztVQUU3QixJQUFJRSxLQUFLLEdBQUcsQ0FBQztVQUNiQSxLQUFLLEdBQUdGLE9BQU8sR0FBRyxDQUFDO1VBQ25CaEQsQ0FBQyxDQUFDMkMsSUFBSSxDQUFDLENBQUNRLEdBQUcsQ0FBQyxTQUFTLEVBQUVELEtBQUssR0FBRyxHQUFHLENBQUM7VUFFbkMsSUFBSUYsT0FBTyxJQUFJLEVBQUUsRUFBRTtZQUNmaEQsQ0FBQyxDQUFDMkMsSUFBSSxDQUFDLENBQUN4QixXQUFXLENBQUMsV0FBVyxDQUFDO1VBQ3BDO1FBQ0o7UUFFQSxJQUFLbUIsR0FBRyxHQUFHLEdBQUcsSUFBSyxDQUFDUSxJQUFJLENBQUNDLEdBQUcsQ0FBQ1AsTUFBTSxHQUFHLENBQUMsQ0FBQyxJQUFLRixHQUFHLEdBQUcsR0FBRyxJQUFLLENBQUNRLElBQUksQ0FBQ0MsR0FBRyxDQUFDUCxNQUFNLENBQUMsRUFBRTtVQUMxRSxJQUFJUSxRQUFPLEdBQUlWLEdBQUcsR0FBRyxHQUFHLEdBQUlFLE1BQU07VUFDbENRLFFBQU8sR0FBRyxDQUFDRixJQUFJLENBQUNDLEdBQUcsQ0FBQ0MsUUFBTyxDQUFDO1VBQzVCQSxRQUFPLEdBQUdGLElBQUksQ0FBQ0csS0FBSyxDQUFDRCxRQUFPLENBQUM7VUFDN0IsSUFBSUUsTUFBSyxHQUFHLENBQUM7VUFFYixJQUFJRixRQUFPLElBQUksRUFBRSxJQUFJQSxRQUFPLEdBQUcsRUFBRSxFQUFFO1lBQy9CRSxNQUFLLEdBQUcsR0FBRztVQUNmLENBQUMsTUFBTSxJQUFJRixRQUFPLElBQUksRUFBRSxJQUFJQSxRQUFPLEdBQUcsRUFBRSxFQUFFO1lBQ3RDRSxNQUFLLEdBQUcsR0FBRztVQUNmLENBQUMsTUFBTSxJQUFJRixRQUFPLElBQUksRUFBRSxJQUFJQSxRQUFPLEdBQUcsRUFBRSxFQUFFO1lBQ3RDRSxNQUFLLEdBQUcsR0FBRztVQUNmLENBQUMsTUFBTSxJQUFJRixRQUFPLElBQUksRUFBRSxJQUFJQSxRQUFPLEdBQUcsRUFBRSxFQUFFO1lBQ3RDRSxNQUFLLEdBQUcsR0FBRztVQUNmLENBQUMsTUFBTSxJQUFJRixRQUFPLElBQUksRUFBRSxJQUFJQSxRQUFPLEdBQUcsRUFBRSxFQUFFO1lBQ3RDRSxNQUFLLEdBQUcsR0FBRztVQUNmLENBQUMsTUFBTSxJQUFJRixRQUFPLElBQUksRUFBRSxJQUFJQSxRQUFPLEdBQUcsRUFBRSxFQUFFO1lBQ3RDRSxNQUFLLEdBQUcsR0FBRztVQUNmLENBQUMsTUFBTSxJQUFJRixRQUFPLElBQUksRUFBRSxJQUFJQSxRQUFPLEdBQUcsRUFBRSxFQUFFO1lBQ3RDRSxNQUFLLEdBQUcsR0FBRztVQUNmLENBQUMsTUFBTSxJQUFJRixRQUFPLElBQUksRUFBRSxJQUFJQSxRQUFPLEdBQUcsRUFBRSxFQUFFO1lBQ3RDRSxNQUFLLEdBQUcsR0FBRztVQUNmLENBQUMsTUFBTSxJQUFJRixRQUFPLElBQUksRUFBRSxJQUFJQSxRQUFPLEdBQUcsRUFBRSxFQUFFO1lBQ3RDRSxNQUFLLEdBQUcsR0FBRztVQUNmLENBQUMsTUFBTSxJQUFJRixRQUFPLElBQUksRUFBRSxJQUFJQSxRQUFPLEdBQUcsR0FBRyxFQUFFO1lBQ3ZDRSxNQUFLLEdBQUcsQ0FBQztVQUNiO1VBRUEsSUFBSWxELENBQUMsQ0FBQzJDLElBQUksQ0FBQyxDQUFDUyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDNUJwRCxDQUFDLENBQUMsd0JBQXdCLENBQUMsQ0FBQ21ELEdBQUcsQ0FBQyxTQUFTLEVBQUVELE1BQUssQ0FBQztVQUNyRDtVQUVBbEQsQ0FBQyxDQUFDMkMsSUFBSSxDQUFDLENBQUNRLEdBQUcsQ0FBQyxTQUFTLEVBQUVELE1BQUssQ0FBQztRQUNqQztNQUNKLENBQUMsQ0FBQztJQUNOLENBQUMsQ0FBQztFQUVOLENBQUMsQ0FBQztBQUNOLENBQUMsQ0FBQyIsImZpbGUiOiJidWlsZC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJqUXVlcnkoZnVuY3Rpb24gKCQpIHtcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJChcInZpZGVvW2F1dG9wbGF5XVwiKS5lYWNoKGZ1bmN0aW9uKCl7IHRoaXMucGxheSgpOyB9KTtcblxuICAgICAgICBpZiAoaW5uZXJXaWR0aCA+IDEwMjQpIHtcbiAgICAgICAgICAgIGxldCBtYWluU2xpZGVyID0gbmV3IFN3aXBlcignLm1haW4tc2xpZGVyIC5zd2lwZXItY29udGFpbmVyJywge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcbiAgICAgICAgICAgICAgICBlZmZlY3Q6ICdmYWRlJyxcbiAgICAgICAgICAgICAgICBtb3VzZXdoZWVsOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDEsXG4gICAgICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVDaGFuZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4X2N1cnJlbnRTbGlkZSA9IHRoaXMucmVhbEluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmpzLW1haW4tc2xpZGVyLXRhYnMgbGkgYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmpzLW1haW4tc2xpZGVyLXRhYnMgbGkgYnV0dG9uW2RhdGEtc2xpZGUtaW5kZXg9JyArIChpbmRleF9jdXJyZW50U2xpZGUgKyAxKSArICddJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJCgnLmpzLW1haW4tc2xpZGVyLXRhYnMgbGkgYnV0dG9uJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9ICQodGhpcykuYXR0cignZGF0YS1zbGlkZS1pbmRleCcpO1xuICAgICAgICAgICAgICAgICQoJy5qcy1tYWluLXNsaWRlci10YWJzIGxpIGJ1dHRvbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAkKCcubWFpbi1zbGlkZXIgLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldDpudGgtY2hpbGQoJyArIGluZGV4ICsgJyknKS5jbGljaygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCcuanMtbmF2LW9wZW4nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICQoJy5qcy1oZWFkZXItbmF2JykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKCcuanMtc2VydmljZXMtcG9wdXAtb3BlbmVyJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gJCh0aGlzKS5hdHRyKCdkYXRhLXRhYi1pbmRleCcpO1xuICAgICAgICAgICAgJCgnLmpzLXNlcnZpY2VzLXBvcHVwJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCgnLmpzLXNlcnZpY2VzLXBvcHVwLW5hdiBidXR0b24sIC5qcy1zZXJ2aWNlcy1wb3B1cC1jb250YWluZXInKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcuanMtc2VydmljZXMtcG9wdXAtbmF2IGJ1dHRvbltkYXRhLXRhYi1pbmRleD1cIicgKyBpbmRleCArICdcIl0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcuanMtc2VydmljZXMtcG9wdXAtY29udGFpbmVyW2RhdGEtdGFiLWluZGV4PVwiJyArIGluZGV4ICsgJ1wiXScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLmpzLXNlcnZpY2VzLXBvcHVwLW5hdiBidXR0b24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgaW5kZXggPSAkKHRoaXMpLmF0dHIoJ2RhdGEtdGFiLWluZGV4Jyk7XG4gICAgICAgICAgICAkKCcuanMtc2VydmljZXMtcG9wdXAtbmF2IGJ1dHRvbiwgLmpzLXNlcnZpY2VzLXBvcHVwLWNvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICQoJy5qcy1zZXJ2aWNlcy1wb3B1cC1uYXYgYnV0dG9uW2RhdGEtdGFiLWluZGV4PVwiJyArIGluZGV4ICsgJ1wiXScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICQoJy5qcy1zZXJ2aWNlcy1wb3B1cC1jb250YWluZXJbZGF0YS10YWItaW5kZXg9XCInICsgaW5kZXggKyAnXCJdJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKCcuanMtc2VydmljZXMtcG9wdXAtY2xvc2UnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKCcuanMtc2VydmljZXMtcG9wdXAnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJy5qcy1zdG9yZS10YWJzIGJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxldCBpbmRleCA9ICQodGhpcykuYXR0cignZGF0YS1zdG9yZS1zbGlkZXItaW5kZXgnKTtcbiAgICAgICAgICAgICQoJy5qcy1zdG9yZS10YWJzIGJ1dHRvbiwgLmpzLXN0b3JlLXNsaWRlcicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICQoJy5qcy1zdG9yZS1zbGlkZXJbZGF0YS1zdG9yZS1zbGlkZXItaW5kZXg9XCInICsgaW5kZXggKyAnXCJdJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCgnLmpzLXN0b3JlLXRhYnMgYnV0dG9uW2RhdGEtc3RvcmUtc2xpZGVyLWluZGV4PVwiJyArIGluZGV4ICsgJ1wiXScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IHN0b3JlU2xpZGVycyA9ICQoJy5qcy1zdG9yZS1zbGlkZXInKTtcblxuICAgICAgICBpZiAoc3RvcmVTbGlkZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgc3RvcmVTbGlkZXJzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9ICQodGhpcykuYXR0cignZGF0YS1zdG9yZS1zbGlkZXItaW5kZXgnKTtcbiAgICAgICAgICAgICAgICBsZXQgc3RvcmVTbGlkZXIgPSBuZXcgU3dpcGVyKCcuanMtc3RvcmUtc2xpZGVyW2RhdGEtc3RvcmUtc2xpZGVyLWluZGV4PVwiJyArIGluZGV4ICsgJ1wiXSAuc3dpcGVyLWNvbnRhaW5lcicsIHtcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXG4gICAgICAgICAgICAgICAgICAgIG1vdXNld2hlZWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiA0LFxuICAgICAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDEyLFxuICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEVsOiAnLmpzLXN0b3JlLXNsaWRlcltkYXRhLXN0b3JlLXNsaWRlci1pbmRleD1cIicgKyBpbmRleCArICdcIl0gLmpzLXN0b3JlLXNsaWRlci1uZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZFbDogJy5qcy1zdG9yZS1zbGlkZXJbZGF0YS1zdG9yZS1zbGlkZXItaW5kZXg9XCInICsgaW5kZXggKyAnXCJdIC5qcy1zdG9yZS1zbGlkZXItcHJldidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHN0b3JlU2xpZGVyID0gbmV3IFN3aXBlcignLmpzLXRlYW0tc2xpZGVyIC5zd2lwZXItY29udGFpbmVyJywge1xuICAgICAgICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXG4gICAgICAgICAgICBtb3VzZXdoZWVsOiBmYWxzZSxcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDEyLFxuICAgICAgICAgICAgcGFnaW5hdGlvbjogZmFsc2UsXG4gICAgICAgICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgICAgICAgICAgbmV4dEVsOiAnLmpzLXRlYW0tc2xpZGVyLW5leHQnLFxuICAgICAgICAgICAgICAgIHByZXZFbDogJy5qcy10ZWFtLXNsaWRlci1wcmV2J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgc3QgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG4gICAgICAgICAgICBsZXQgc2VjdGlvbiA9ICQoJy5iaW9tYWNoaW5lLWZ1dHVyZScpXG4gICAgICAgICAgICBsZXQgc2VjdGlvblNUID0gc2VjdGlvbi5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICBsZXQgc2VjdGlvbkhlaWdodCA9IHNlY3Rpb24uaGVpZ2h0KCk7XG4gICAgICAgICAgICBsZXQgd2luZG93SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xuICAgICAgICAgICAgbGV0IHBvaW50ID0gKHNlY3Rpb25TVCArIHNlY3Rpb25IZWlnaHQpIC0gd2luZG93SGVpZ2h0O1xuXG4gICAgICAgICAgICBpZiAoc3QgPj0gcG9pbnQpIHtcbiAgICAgICAgICAgICAgICAkKCcuZm9vdGVyJykuYWRkQ2xhc3MoJy0tdmlzaWJsZScpO1xuICAgICAgICAgICAgICAgICQoJy5iaW9tYWNoaW5lLXN0cmluZ19fYmcnKS5hZGRDbGFzcygnLS12aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgJCgnLmpzLXBhZ2UtbmF2JykuYWRkQ2xhc3MoJy0taGlkZGVuJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5iaW9tYWNoaW5lLXN0cmluZ19fYmcnKS5yZW1vdmVDbGFzcygnLS12aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgJCgnLmZvb3RlcicpLnJlbW92ZUNsYXNzKCctLXZpc2libGUnKTtcbiAgICAgICAgICAgICAgICAkKCcuanMtcGFnZS1uYXYnKS5yZW1vdmVDbGFzcygnLS1oaWRkZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgc3QgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG4gICAgICAgICAgICBsZXQgc2VjdGlvbiA9ICQoJy5qcy1zdG9yZS1zZWN0aW9uJylcbiAgICAgICAgICAgIGxldCBzZWN0aW9uU1QgPSBzZWN0aW9uLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgIGxldCBwb2ludCA9IHNlY3Rpb25TVCAtIDIwMDtcblxuICAgICAgICAgICAgaWYgKHN0ID49IHBvaW50KSB7XG4gICAgICAgICAgICAgICAgc2VjdGlvbi5yZW1vdmVDbGFzcygnLS1pbnZlcnRlZCcpO1xuICAgICAgICAgICAgICAgICQoJy5iaW9tYWNoaW5lLXByb21vLi0tbGFzdCcpLmFkZENsYXNzKCctLWludmVydGVkJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlY3Rpb24uYWRkQ2xhc3MoJy0taW52ZXJ0ZWQnKTtcbiAgICAgICAgICAgICAgICAkKCcuYmlvbWFjaGluZS1wcm9tby4tLWxhc3QnKS5yZW1vdmVDbGFzcygnLS1pbnZlcnRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuXG4gICAgICAgICQoJy5iaW9tYWNoaW5lLXN0cmluZ19faXRlbScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbGV0IGl0ZW0gPSB0aGlzO1xuXG4gICAgICAgICAgICAkKHdpbmRvdykub24oJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBsZXQgaGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IGhlaWdodCAtIDE1MDtcbiAgICAgICAgICAgICAgICBsZXQgdmlld3BvcnRPZmZzZXQgPSBpdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIGxldCB0b3AgPSB2aWV3cG9ydE9mZnNldC50b3AgLSBoZWlnaHQ7XG4gICAgICAgICAgICAgICAgaWYgKCh0b3AgKyAxNTApIDw9IDAgJiYgKHRvcCArIDE1MCkgPj0gLU1hdGguYWJzKGhlaWdodCAvIDIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwZXJjZW50ID0gKHRvcCAqIDEwMCkgLyBoZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHBlcmNlbnQgPSArTWF0aC5hYnMocGVyY2VudCk7XG4gICAgICAgICAgICAgICAgICAgIHBlcmNlbnQgPSBNYXRoLnJvdW5kKHBlcmNlbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcGVyY2VudCAqIDI7XG4gICAgICAgICAgICAgICAgICAgICQoaXRlbSkuY3NzKCdvcGFjaXR5JywgdmFsdWUgLyAxMDApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChwZXJjZW50ID49IDQwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKGl0ZW0pLnJlbW92ZUNsYXNzKCctLW9wYWNpdHknKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICgodG9wICsgMTUwKSA8PSAtTWF0aC5hYnMoaGVpZ2h0IC8gMikgJiYgKHRvcCArIDE1MCkgPj0gLU1hdGguYWJzKGhlaWdodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBlcmNlbnQgPSAodG9wICogMTAwKSAvIGhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudCA9ICtNYXRoLmFicyhwZXJjZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudCA9IE1hdGgucm91bmQocGVyY2VudCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlcmNlbnQgPj0gNTAgJiYgcGVyY2VudCA8IDU1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IDAuOTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwZXJjZW50ID49IDU1ICYmIHBlcmNlbnQgPCA2MCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAwLjg7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGVyY2VudCA+PSA2MCAmJiBwZXJjZW50IDwgNjUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gMC43O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBlcmNlbnQgPj0gNjUgJiYgcGVyY2VudCA8IDcwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IDAuNjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwZXJjZW50ID49IDcwICYmIHBlcmNlbnQgPCA3NSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAwLjU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGVyY2VudCA+PSA3NSAmJiBwZXJjZW50IDwgODApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gMC40O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBlcmNlbnQgPj0gODAgJiYgcGVyY2VudCA8IDg1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IDAuMztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwZXJjZW50ID49IDg1ICYmIHBlcmNlbnQgPCA5MCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAwLjI7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGVyY2VudCA+PSA5MCAmJiBwZXJjZW50IDwgOTUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gMC4xO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBlcmNlbnQgPj0gOTAgJiYgcGVyY2VudCA8IDEwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoaXRlbSkuaGFzQ2xhc3MoJy0tbGFzdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuYmlvbWFjaGluZS1zdHJpbmdfX2JnJykuY3NzKCdvcGFjaXR5JywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgJChpdGVtKS5jc3MoJ29wYWNpdHknLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG5cbiAgICB9KTtcbn0pOyJdfQ==